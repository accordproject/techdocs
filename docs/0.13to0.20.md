---
id: 0.13to0.20
title: Migrating from 0.13.*
---

Much has changed in the new `0.20` release. This provides a step-by-step migration guide to port your Accord Project templates from version `0.13` or earlier to version `0.20`.

## package.json changes

You will first need to update the `package.json` in your template to 

## Templates Directory Changes

The layout of templates has changed to reflect the conceptual notion of Accord Project templates (with a grammar, a model and logic). To migrate a template directory from version `0.13` or earlier to the new `0.20` layout:
1. Rename your samples from `sample.txt` to `sample.md` (or generally any other `sample*.txt` files to use the `.md` extension)
2. Rename your template grammar from `grammar/template.tem` to `grammar.tem.md`
3. Rename your `lib` directory to `logic`
4. Rename your `models` directory to `model`

## Grammar changes

The template grammar has changed to support rich text annotations through CommonMark and a new syntax for variables.

- Grammar and samples have been migrated to [CiceroMark]()
- The default sample file is `sample.md` instead of `sample.txt`

### Markup Changes

Breaking changes from the `0.13.*` and earlier syntax:
- Variables should be changed from `[{variableName}]` to `{{variableName}}`
- Formatted variables should be changed from `[{variableName as "FORMAT"}]` to `{{variableName as "FORMAT"}}`
- Boolean variables should be changed from `[{"This is a force majeure":?forceMajeure}]` to the new block syntax `{{#if forceMajeure}}This is a force majeure{{/if}}`
- Nested clauses should be changed from `[{#payment}]As consideration in full for the rights granted herein...[{/payment}]` to the new block syntax `{{#clause payment}}As consideration in full for the rights granted herein...{{/clause}}`
- Lexer reserves `{{` instead of reserving `[{`. This may break some templates if the grammar or text uses `{{`.

## Logic Changes

Ergo changes include:
- Enumerated values are now proper values with a proper enum type instead of relying on the type `String`. E.g., `"USD"` should now be `USD` or the fully qualified name `~org.accordproject.money.CurrencyCode.USD`. Similarly functions or clauses using enums as parameters or as output should use the proper enum type instead of `String`.
- Templates using `now` used to return the current time. This will now raise a `Variable now not found` error. Templates should replace `now` with the proper built-in function `now()`.
- ...

